!function t(e,n,o){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var d=n[a]={exports:{}};e[a][0].call(d.exports,function(t){var n=e[a][1][t];return i(n?n:t)},d,d.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){"use strict";function o(t){var e={minMatchLength:{id:"#min-match-length",type:"inputText",value:4},ignoreFootnotes:{id:"#ignore-footnotes",type:"checkbox",value:!1},ignoreLetterCase:{id:"#ignore-letter-case",type:"checkbox",value:!0},ignoreNumbers:{id:"#ignore-numbers",type:"checkbox",value:!1},ignorePunctuation:{id:"#ignore-punctuation",type:"checkbox",value:!0},replaceUmlaut:{id:"#replace-umlaut",type:"checkbox",value:!0}};this.storage=new r(t,e),this.template=new a,this.view=new s(this.template),this.controller=new i(this.storage,this.view)}var i=t("./controller.js"),r=t("./storage.js"),a=t("./template.js"),s=t("./view.js");e.exports=o},{"./controller.js":2,"./storage.js":4,"./template.js":5,"./view.js":6}],2:[function(t,e,n){(function(n){"use strict";function o(t,e){this.storage=t,this.view=e,this.maxCharactersPerPage=1900,this.maxNumberOfPages=500,this.inputTexts=[new a,new a],this._bindEvents(),this._updateUI(this.storage.data)}var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,r=t("../inputReader/fileInputReader.js"),a=t("./inputText.js"),s=t("../simtexter/simtexter.js"),l=t("../inputReader/textInputReader.js");o.prototype._alertLongInput=function(t){var e=this,n=e.inputTexts[t].getNumberOfPages(e.maxCharactersPerPage);if(n>e.maxNumberOfPages){var o=e.inputTexts[t].mode,i=[o," ",t+1," is too long. To prevent visualization issues, please consider truncating this ",o.toLowerCase(),"."].join(""),r=e._computeReadingSpeed(i);e.view.showAlertMessage("warning",i,r)}},o.prototype._bindEvents=function(){var t=this;t.view.bind("changeSpinnerInput",function(e,n){t._updateStorage(e,n)}),t.view.bind("compare",function(){t._compare()}),t.view.bind("dismissAlert"),t.view.bind("hidePrintDialog"),t.view.bind("initBootstrap"),t.view.bind("inputFile",function(e,n,o,i){t._readFile(e,n,o,i)}),t.view.bind("inputText",function(e,n,o){t._readText(e,n,o)}),t.view.bind("print",function(e){t._print(e)}),t.view.bind("resize"),t.view.bind("scrollToMatch"),t.view.bind("selectTab"),t.view.bind("selectHTMLOption",function(e,n,o){t.inputTexts[e].setHTMLOption(n),o&&t._readText(o,e,t.inputTexts[e].tabPaneId)}),t.view.bind("selectSettingsOption",function(e,n){t._updateStorage(e,n)}),t.view.bind("showPrintDialog"),t.view.bind("toggleInputPanel"),t.view.bind("toggleSettingsSidebar"),t.view.bind("toggleSettingsSidebarPanes")},o.prototype._compare=function(){var t=this;if(t._isInputValid()){t.view.toggleWaitingCursor("show");var e=new s(t.storage);setTimeout(function(){e.compare(t.inputTexts).then(function(n){t.view.results={texts:e.texts,uniqueMatches:e.uniqueMatches},t.view.createTemplates(),t.view.showSimilarities(n),t.view.resetScrollbars()},function(e){t.view.clearOutputPanel();var n=t._computeReadingSpeed(e);t.view.showAlertMessage("info",e,n)})},200)}},o.prototype._computeReadingSpeed=function(t){var e=6e3,n=4e3*Math.round(t.length/40);return n>e?n:e},o.prototype._isInputValid=function(){for(var t=this,e=!0,n=t.view.getActiveTabPaneIds(),o=t.inputTexts.length,i=0;o>i;i++){var r=t.inputTexts[i],a=n[i],s=void 0!==r.text&&r.tabPaneId===a;s?t.view.toggleErrorStatus("hide",a):t.view.toggleErrorStatus("show",a),e=e&&s}return e},o.prototype._print=function(t){var e=function(){setTimeout(function(){window.print()},700)};i.when(t).then(e)},o.prototype._readFile=function(t,e,n,o){var i=this,a=i.storage.getItemValueByKey("ignoreFootnotes"),s=function(r){i.inputTexts[e].setFileInput(t,r,o),i.view.loading("done",n),i.view.clearTabPaneTextInput(e),i._alertLongInput(e)},l=function(t){i.inputTexts[e].reset(),i.view.loading("error",n),i.view.clearTabPaneTextInput(e);var o=i._computeReadingSpeed(t);i.view.showAlertMessage("error",t,o)};if(t){var p=i.view.loading("start",n),d=new r(t,a);d.readFileInput(p).then(s,l)}else i.view.loading("cancel",n),i.inputTexts[e].reset()},o.prototype._readText=function(t,e,n){var o=this,i=function(t){o.inputTexts[e].setTextInput(t,n),o.view.toggleCompareBtn("enable"),o.view.clearTabPaneFileInput(e),o._alertLongInput(e)},r=function(t){o.inputTexts[e].reset(),o.view.toggleCompareBtn("enable");var n=o._computeReadingSpeed(t);o.view.showAlertMessage("error",t,n)};if(t.length>0&&/\S/.test(t))if(o.inputTexts[e].isHTML){o.view.toggleCompareBtn("disable");var a=new l;a.readTextInput(t).then(i,r)}else i(t);else o.inputTexts[e].reset()},o.prototype._updateStorage=function(t,e){var n=this;n.storage.setItemValueById(t,e)},o.prototype._updateUI=function(t){var e=this;for(var n in t){var o=t[n];e.view.updateUIOption(o.id,o.type,o.value)}},e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../inputReader/fileInputReader.js":9,"../inputReader/textInputReader.js":10,"../simtexter/simtexter.js":14,"./inputText.js":3}],3:[function(t,e,n){"use strict";function o(t,e,n,o){this.tabPaneId=o,this.mode=t,this.isHTML=!1,this.fileName=e&&e.name,this.text=n}o.prototype.getNumberOfPages=function(t){return this.text.length/t},o.prototype.reset=function(){this.tabPaneId=void 0,this.mode=void 0,this.fileName=void 0,this.text=void 0},o.prototype.setFileInput=function(t,e,n){this.tabPaneId=n,this.mode="File",this.fileName=t.name,this.text=e},o.prototype.setTextInput=function(t,e){this.tabPaneId=e,this.mode="Text",this.fileName=this.isHTML?"HTML text input":"Plain text input",this.text=t},o.prototype.setHTMLOption=function(t){this.isHTML=t},e.exports=o},{}],4:[function(t,e,n){"use strict";function o(t,e){this._db=t,this.data=this._initialize(t,e)}o.prototype.getItemValueByKey=function(t){var e=this;return e._getItemByKey(t).value},o.prototype.setItemValueById=function(t,e){var n=this,o=n._getItemById(t);o.value=e,n._save(n.data)},o.prototype._getItemById=function(t){var e=this,n=e.data;for(var o in n){var i=n[o];if(i.id===t)return i}},o.prototype._getItemByKey=function(t){var e=this;return e.data[t]},o.prototype._initialize=function(t,e){if(localStorage){if(localStorage[t]){var n=localStorage.getItem(t);return JSON.parse(n)}localStorage.setItem(t,JSON.stringify(e))}return e},o.prototype._save=function(t){localStorage&&localStorage[this._db]&&localStorage.setItem(this._db,JSON.stringify(t)),this.data=t},e.exports=o},{}],5:[function(t,e,n){"use strict";function o(){}o.prototype.createAlertMessage=function(t,e){var n=document.createElement("div");return n.className="alert alert-warning",n.innerHTML=['<table class="table table-condensed">',"<tbody>","<tr>",'<td class="h5"><i class="fa fa-exclamation-circle"></i></td>',"<td>","<h5>",t,"</h5>","<p>",e,"</p>","</td>","</tr>","</tbody>","</table>"].join(""),n},o.prototype.createOutputTitles=function(t){for(var e=[document.getElementById("output-title-1"),document.getElementById("output-title-2")],n=e.length,o=0;n>o;o++){var i=t[o].fileName||"",r=t[o].inputMode,a=e[o];a.innerHTML=["<p><b>",r.toUpperCase(),": </b>",i,"</p> "].join("")}},o.prototype.createPrintDialog=function(t){var e=document.createElement("section");return e.id="modal-print",e.className="modal fade",e.setAttribute("tabindex","-1"),e.setAttribute("role","dialog"),e.innerHTML=['<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header">','<button type="button" class="close" data-dismiss="modal" aria-label="Close">','<span aria-hidden="true">&times;</span>',"</button>",'<h4 class="modal-title">Print output</h4>',"</div>",'<div class="modal-body">','<div class="row">','<div class="col-xs-6">','<div class="form-group form-group-sm">','<label for="input-comment-1">1: Comment for ',t[0].inputMode,"</label>",'<textarea id="input-comment-1" class="form-control" rows="5" autocomplete="off" placeholder="Type a comment"></textarea>',"</div>","</div>",'<div class="col-xs-6">','<div class="form-group form-group-sm">','<label for="input-comment-2">2: Comment for ',t[1].inputMode,"</label>",'<textarea id="input-comment-2" class="form-control" rows="5" autocomplete="off" placeholder="Type a comment"></textarea>',"</div>","</div>","</div>","</div>",'<div class="modal-footer">','<button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cancel</button>','<button id="modal-print-btn" type="button" class="btn btn-primary btn-sm">Print</button>',"</div>","</div>","</div>"].join(""),e},o.prototype.createPrintSummary=function(t,e){var n=document.getElementById("print-summary");n.innerHTML=["<h4>COMPARISON SUMMARY</h4>","<h6>DATE/TIME: ",(new Date).toUTCString(),"</h6>",'<table class="table table-condensed table-bordered">',"<thead>","<tr>",'<th class="col-xs-2"></th>','<th class="col-xs-5">',t[0].fileName,"</th>",'<th class="col-xs-5">',t[1].fileName,"</th>","</tr>","</thead>","<tbody>","<tr>","<th>Comment</th>",'<td id="print-comment-1"></td>','<td id="print-comment-2"></td>',"</tr>","<tr>","<th>Type</th>","<td>",t[0].inputMode,"</td>","<td>",t[1].inputMode,"</td>","</tr>","<tr>","<th>Characters</th>","<td>",t[0].nrOfCharacters,"</td>","<td>",t[1].nrOfCharacters,"</td>","</tr>","<tr>","<th>Words</th>","<td>",t[0].nrOfWords,"</td>","<td>",t[1].nrOfWords,"</td>","</tr>","<tr>","<th>Unique matches</th>",'<td colspan="2">',e,"</td>","</tr>","</tbody>","</table>"].join("")},o.prototype.createStatistics=function(t,e){var n=document.getElementById("statistics");n.innerHTML=['<table class="table table-condensed table-bordered">',"<thead>","<tr>",'<th class="col-xs-2"></th>','<th class="col-xs-5">',t[0].fileName,"</th>",'<th class="col-xs-5">',t[1].fileName,"</th>","</tr>","</thead>","<tbody>","<tr>","<th>Type</th>","<td>",t[0].inputMode,"</td>","<td>",t[1].inputMode,"</td>","</tr>","<tr>","<th>Characters</th>","<td>",t[0].nrOfCharacters,"</td>","<td>",t[1].nrOfCharacters,"</td>","</tr>","<tr>","<th>Words</th>","<td>",t[0].nrOfWords,"</td>","<td>",t[1].nrOfWords,"</td>","</tr>","<tr>","<th>Unique matches</th>",'<td colspan="2">',e,"</td>","</tr>","</tbody>","</table>"].join("")},e.exports=o},{}],6:[function(t,e,n){(function(n){"use strict";function o(t){this.template=t,this.results={},this.$alertsPanel=i("#alerts-panel"),this.$compareBtn=i("#compare-btn"),this.$contentWrapper=i("#content-wrapper"),this.$file=i(":file"),this.$htmlOptions=i("#html-text-1, #html-text-2"),this.$inputLnk=i("#input-lnk"),this.$inputPanel=i("#input-panel"),this.$inputPanes=i("#input-pane-1, #input-pane-2"),this.$inputFiles=i("#input-file-1, #input-file-2"),this.$inputTexts=i("#input-text-1, #input-text-2"),this.$outputPanel=i("#output-panel"),this.$outputTexts=i("#comparison-output-1, #comparison-output-2"),this.$outputTextContainers=i("#comparison-output-1 > .comparison-output-container, #comparison-output-2 > .comparison-output-container"),this.$outputParagraphs=i("#comparison-output-1 > .comparison-output-container > p, #comparison-output-2 > .comparison-output-container > p"),this.$printBtn=i("#print-btn"),this.$settingsSidebar=i("#settings-sidebar"),this.$settingsSidebarLnk=i("#settings-sidebar-lnk"),this.$settingsSidebarPanes=i("#comparison-options-pane, #input-options-pane"),this.$spinner=i("#min-match-length-spinner"),this.$tooltip=i('[data-toggle="tooltip"], [rel="tooltip"]'),this._resetTextInputTabPanes(),this._updateOutputPanelHeight(),this._updateAlertsPanelWidth()}var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,r=t("../autoScroll/targetMatch.js");o.prototype.bind=function(t,e){var n=this;switch(t){case"changeSpinnerInput":n.$spinner.on("change mousewheel DOMMouseScroll",'input[type="text"]',function(t){var o=t.target,r=n._getId(o),a=parseInt(i(o).val(),10);("mousewheel"===t.type||"DOMMouseScroll"===t.type)&&(t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?a+=1:a-=1),a=1>a?1:a,e(r,a),n.updateUIOption(r,"inputText",a)}).on("click",".btn",function(t){t.stopPropagation();var o=i(t.delegateTarget).find('input[type="text"]'),r=n._getId(o),a=parseInt(o.val(),10);i(t.currentTarget).hasClass("plus")?a+=1:a=a>1?a-1:a,e(r,a),n.updateUIOption(r,"inputText",a)});break;case"compare":n.$compareBtn.on("click",function(t){t.stopPropagation(),i(this).tooltip("hide"),n.$settingsSidebar.removeClass("expanded"),setTimeout(function(){e()},200)});break;case"dismissAlert":n.$alertsPanel.on("click",".alert",function(){i(this).remove()});break;case"initBootstrap":n.$tooltip.tooltip({container:"body",delay:{show:800,hide:0},html:!0,placement:"bottom",trigger:"hover"}),n.$file.filestyle({buttonName:"btn-primary",buttonText:"Browse file",placeholder:"No file selected",size:"sm"});break;case"inputFile":n.$inputFiles.on("change",function(t){var o=t.target,r=n._getId(o),a=n._getId(i(o).parents(".tab-pane"));n.toggleErrorStatus("hide",a);var s=o.files[0],l=n._getIndex(r),p=i(o).parent();e(s,l,p,a)});break;case"inputText":n.$inputTexts.on("change input",function(t){var o=t.target,r=i(o),a=n._getId(r.parents(".tab-pane"));if("input"===t.type&&n.toggleErrorStatus("hide",a),"change"===t.type){var s=n._getId(o),l=r.val(),p=n._getIndex(s);e(l,p,a)}});break;case"hidePrintDialog":n.$contentWrapper.on("hide.bs.modal",".modal",function(t){n._togglePrintDialog("hide",t.target)});break;case"print":n.$contentWrapper.on("click","#modal-print-btn",function(t){t.stopPropagation();var n=i("#input-comment-1").val(),o=i("#input-comment-2").val();i("#print-comment-1").text(n),i("#print-comment-2").text(o);var r=i(".modal").modal("hide").promise();e(r)});break;case"resize":i(window).on("resize",function(){n._updateOutputPanelHeight(),n._updateAlertsPanelWidth()});break;case"scrollToMatch":n.$outputTexts.on("click","a",function(t){t.preventDefault(),t.stopPropagation();var e=new r(t.target),n=e.getScrollPosition();e.scroll(n)});break;case"selectHTMLOption":n.$inputPanel.on("change",'input[type="checkbox"]',function(t){var o=t.target,r=n._getId(o),a=n._getIndex(r),s=i(o).prop("checked"),l=n.$inputTexts.eq(a).val();e(a,s,l)});break;case"selectSettingsOption":n.$settingsSidebarPanes.on("change",'input[type="checkbox"]',function(t){var o=t.target,r=n._getId(o),a=i(o).prop("checked");e(r,a)});break;case"selectTab":n.$inputPanes.on("shown.bs.tab",'a[data-toggle="tab"]',function(t){var e=i(t.relatedTarget).attr("href");n.toggleErrorStatus("hide",e)});break;case"showPrintDialog":n.$printBtn.on("click",function(t){t.stopPropagation(),n._togglePrintDialog("show")});break;case"toggleInputPanel":n.$inputLnk.on("click",function(t){t.preventDefault(),t.stopPropagation(),i(this).tooltip("hide"),n._toggleInputPanel("toggle")});break;case"toggleSettingsSidebar":n.$settingsSidebarLnk.on("click",function(t){t.preventDefault(),t.stopPropagation(),i(this).tooltip("hide"),n.$settingsSidebar.toggleClass("expanded")}),i("body").on("click","nav, #content-wrapper",function(){n.$settingsSidebar.removeClass("expanded")});break;case"toggleSettingsSidebarPanes":n.$settingsSidebar.on("click",".panel-title",function(){i(this).toggleClass("active")});break;default:throw new Error("Event type not valid.")}},o.prototype.clearOutputPanel=function(){var t=this;t.$outputParagraphs.each(function(){i(this).remove()}),t._toggleOutputPanel("hide"),t.toggleWaitingCursor("hide")},o.prototype.clearTabPaneFileInput=function(t){var e=this,n="#tab-file-"+(t+1);i(n+" input").filestyle("clear"),e.toggleErrorStatus("hide",n),e.loading("cancel",n)},o.prototype.clearTabPaneTextInput=function(t){var e=this,n="#tab-text-"+(t+1);i(n+" textarea").val(""),e.toggleErrorStatus("hide",n)},o.prototype.createTemplates=function(){var t=this;t.template.createPrintSummary(t.results.texts,t.results.uniqueMatches),t.template.createStatistics(t.results.texts,t.results.uniqueMatches),t.template.createOutputTitles(t.results.texts)},o.prototype.getActiveTabPaneIds=function(){var t=this,e=[];return i(".tab-pane.active").each(function(){var n=t._getId(this);e.push(n)}),e},o.prototype.loading=function(t,e){var n=this;switch(t){case"start":n.toggleCompareBtn("disable"),i(e).find(".fa").addClass("hidden"),i(e).find(".fa-spinner").removeClass("hidden");break;case"done":n.toggleCompareBtn("enable"),i(e).find(".fa").addClass("hidden"),i(e).find(".fa-check").removeClass("hidden");break;case"cancel":n.toggleCompareBtn("enable"),i(e).find(".fa").addClass("hidden");break;case"error":n.toggleCompareBtn("enable"),i(e).find(".fa").addClass("hidden"),i(e).find(".fa-times").removeClass("hidden");break;default:throw new Error("Event type not valid.")}},o.prototype.resetScrollbars=function(){var t=this;t.$outputTexts.scrollTop(0)},o.prototype._resetTextInputTabPanes=function(){var t=this;t.$htmlOptions.prop("checked",!1),t.$inputTexts.val("")},o.prototype.showAlertMessage=function(t,e,n){var o=this,r=o.template.createAlertMessage(t,e);o.$alertsPanel.append(i(r)),setTimeout(function(){o.$alertsPanel.children().eq(0).remove()},n)},o.prototype.showSimilarities=function(t){for(var e=this,n=t.length,o=0;n>o;o++){var r=i("<p>").append(t[o]);e.$outputTextContainers.eq(o).html(r)}e._toggleOutputPanel("show"),setTimeout(function(){e._toggleInputPanel("hide")},100),e.toggleWaitingCursor("hide")},o.prototype.toggleCompareBtn=function(t){var e=this;switch(t){case"enable":e.$compareBtn.prop("disabled",!1);break;case"disable":e.$compareBtn.prop("disabled",!0);break;default:throw new Error("Event type not valid.")}},o.prototype.toggleErrorStatus=function(t,e){switch(t){case"show":i(e+" .apply-error").addClass("has-error");break;case"hide":i(e+" .apply-error").removeClass("has-error");break;default:throw new Error("Event type not valid.")}},o.prototype.toggleWaitingCursor=function(t){switch(t){case"show":document.body.className="waiting";break;case"hide":document.body.className="";break;default:throw new Error("Event type not valid.")}},o.prototype.updateUIOption=function(t,e,n){switch(e){case"checkbox":i(t).prop("checked",n);break;case"select":i(t).val(n);break;default:i(t).val(n)}},o.prototype._computeOutputPanelHeight=function(){var t=this,e=i("body").outerHeight(!0),n=t.$outputPanel.offset().top,o=parseInt(t.$outputPanel.css("padding-top"),10),r=t.$outputTexts.eq(0).offset().top,a=r-n;return e-n-(a+o)},o.prototype._getId=function(t){return"#"+i(t).attr("id")},o.prototype._getIndex=function(t){var e=t.split("-"),n=e[e.length-1];return parseInt(n,10)-1},o.prototype._toggleInputPanel=function(t){var e=this;switch(t){case"toggle":i(".btn-group.open").removeClass("open"),e.$inputPanel.toggleClass("expanded");break;case"hide":e.$inputPanel.removeClass("expanded");break;default:throw new Error("Event type not valid.")}},o.prototype._toggleOutputPanel=function(t){var e=this;switch(t){case"show":e.$outputPanel.removeClass("invisible");break;case"hide":e.$outputPanel.addClass("invisible");break;default:throw new Error("Event type not valid.")}},o.prototype._togglePrintDialog=function(t,e){var n=this;switch(t){case"show":var o=i(n.template.createPrintDialog(n.results.texts));n.$contentWrapper.append(o),o.modal("show");break;case"hide":i(e).remove();break;default:throw new Error("Event type not valid.")}},o.prototype._updateAlertsPanelWidth=function(){var t=this,e=6,n=i("nav").width(),o=i("nav .pull-left").outerWidth(),r=i("nav .pull-right").outerWidth(),a=n-(o+r+e);t.$alertsPanel.css({left:o+"px","max-width":a+"px"})},o.prototype._updateOutputPanelHeight=function(){var t=this,e=t._computeOutputPanelHeight();t.$outputTexts.each(function(){i(this).css("height",e+"px")})},e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../autoScroll/targetMatch.js":8}],7:[function(t,e,n){"use strict";function o(t,e,n){this.topPadding=t,this.bottomPadding=e,this.yPosition=n}e.exports=o},{}],8:[function(t,e,n){(function(n){"use strict";function o(t){this.$srcElem=i(t),this.$srcParent=i(this.$srcElem.parent().parent().parent()),this.$elem=i(this.$srcElem.attr("href")),this.$wrapper=i(this.$elem.parent()),this.$container=i(this.$wrapper.parent()),this.$parent=i(this.$container.parent()),this.parentHeight=this.$parent[0].getBoundingClientRect().height,this.containerTBPadding=parseInt(this.$container.css("padding-top"),10)+parseInt(this.$container.css("padding-bottom"),10),this.wrapperTopPadding=parseFloat(this.$wrapper.css("padding-top")),this.wrapperBottomPadding=parseFloat(this.$wrapper.css("padding-bottom"))}var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,r=t("./scrollPosition.js");o.prototype.getScrollPosition=function(){var t=this,e=t.$wrapper.outerHeight(!0)+t.containerTBPadding,n=t.wrapperTopPadding,o=t.wrapperBottomPadding,i=t.$srcElem.offset().top-t.$srcParent.offset().top-(t.$elem.offset().top-t.$parent.offset().top);n>0&&(i+=n,e-=n,n=0),o>0&&(e-=o,o=0);var a=t.$parent.scrollTop()-i;if(a>e-t.parentHeight){var s=a+t.parentHeight-e;o=Math.abs(s)}if(0>a){var l=a;n=Math.abs(l),a-=l}return new r(n,o,a)},o.prototype.scroll=function(t){var e=this;e.$wrapper.animate({"padding-top":t.topPadding,"padding-bottom":t.bottomPadding},700),e.$parent.animate({scrollTop:t.yPosition},700)},e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./scrollPosition.js":7}],9:[function(t,e,n){(function(t){"use strict";function n(t,e){this.file=t,this.ignoreFootnotes=e}var o="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,i="undefined"!=typeof window?window.JSZip:"undefined"!=typeof t?t.JSZip:null;n.prototype.readFileInput=function(t){var e=this,n=e.file,i=e._getFileType(),r=o.Deferred(),a=new FileReader;switch(a.onerror=function(t){var e=t.target.error;switch(e.code){case e.NOT_FOUND_ERR:r.reject("File not found!");break;case e.NOT_READABLE_ERR:r.reject("File not readable.");break;case e.ABORT_ERR:r.reject("File reading aborted.");break;default:r.reject("An error occurred while reading this file.")}},a.onloadstart=t,i){case"docx":a.onload=function(t){var n=e._readDOCX(t.target.result);n?/\S/.test(n)?r.resolve(n):r.reject("The selected DOCX file is empty."):r.reject("The selected file is not a valid DOCX file.")},a.readAsArrayBuffer(n);break;case"odt":a.onload=function(t){var n=e._readODT(t.target.result);n?/\S/.test(n)?r.resolve(n):r.reject("The selected ODT file is empty."):r.reject("The selected file is not a valid ODT file.")},a.readAsArrayBuffer(n);break;case"txt":a.onload=function(t){var e=t.target.result;if(e)if(/\S/.test(e)){var n=e.replace(/\r(?!\n)/g,"\n");r.resolve(n)}else r.reject("The selected TXT file is empty.")},a.readAsText(n);break;default:r.reject("File type not supported.")}return r.promise()},n.prototype._extractTextFromNode=function(t,e,n){var o=this,i={"w:p":"\n","text:p":"\n",p:"\n"},r=i[t.nodeName]||"",a="";if(t.hasChildNodes())for(var s=t.firstChild;s;)"text:note"!==s.nodeName&&"note"!==s.nodeName?(a+=s.nodeName===e?s.textContent:s.nodeName===n?"\n":o._extractTextFromNode(s,e,n),s=s.nextSibling):s=s.nextSibling;return a+r},n.prototype._getFileType=function(){var t=this,e=t.file;return/docx$/i.test(e.name)?"docx":/odt$/i.test(e.name)?"odt":/txt$/i.test(e.name)?"txt":void 0},n.prototype._getTextContent=function(t,e,n){for(var o,i=this,r=t.length,a=0;r>a;a++){var s=t[a],l=i._extractTextFromNode(s,e,n);o=[o,l].join("")}return o},n.prototype._readDOCX=function(t){var e,n,r,a=this,s="",l="w:t",p="w:br";try{r=new i(t);var d=r.files["word/document.xml"];if(d){n=o.parseXML(d.asText());var u=o(n).find("w\\:body, body").children();e=a._getTextContent(u,l,p)}if(!a.ignoreFootnotes){if(d=r.files["word/footnotes.xml"]){n=o.parseXML(d.asText());var c=o(n).find("w\\:footnotes, footnotes").children("w\\:footnote:not([w\\:type]), footnote:not([type])"),h=a._getTextContent(c,l,p);h&&(s=[s,h].join(""))}if(d=r.files["word/endnotes.xml"]){n=o.parseXML(d.asText());var f=o(n).find("w\\:endnotes, endnotes").children("w\\:endnote:not([w\\:type]), endnote:not([type])"),g=a._getTextContent(f,l,p);g&&(s=[s,g].join(""))}s&&s.length&&(e=[e,"FOOTNOTES",s].join("\n"))}}catch(m){}return e},n.prototype._readODT=function(t){var e,n,r=this,a="#text",s="text:line-break";try{n=new i(t);var l=n.files["content.xml"];if(l){var p=o.parseXML(l.asText()),d=o(p).find("office\\:body, body").children();if(e=r._getTextContent(d,a,s),!r.ignoreFootnotes){var u=o(d).find("text\\:note-body, note-body"),c=r._getTextContent(u,a,s);c&&c.length&&(e=[e,"FOOTNOTES",c].join("\n"))}}}catch(h){}return e},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,e,n){(function(t){"use strict";function n(){}var o="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,i="undefined"!=typeof window?window.XRegExp:"undefined"!=typeof t?t.XRegExp:null;n.prototype.readTextInput=function(t){var e=this,n=o.Deferred(),i="",r=document.createElement("div");r.innerHTML=t;var a=e._extractTextFromNode(r);return a.length&&/\S/.test(a)?(i=[i,a].join(""),i=i.replace(/\n[ \t\v]*/g,"\n"),i=i.replace(/\n{3,}/g,"\n\n"),n.resolve(i)):n.reject("HTML input has no valid text contents."),n.promise()},n.prototype._extractTextFromNode=function(t){var e=this,n=i("^\\pL+$"),o="",r=function(t){for(var e=["IFRAME","NOSCRIPT","SCRIPT","STYLE"],n=e.length,o=0;n>o;o++)if(t===e[o])return!1;return!0};if(r(t.nodeName)&&t.hasChildNodes())for(var a=t.firstChild;a;){if(3===a.nodeType){var s=a.textContent;s.length&&(o+=s)}else{var l=e._extractTextFromNode(a);n.test(o[o.length-1])&&n.test(l[0])&&(o+=" "),o+=l}a=a.nextSibling}return o},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(t,e,n){(function(e){"use strict";var n="undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null,o=t("./app/app.js");n(window).load(function(){setTimeout(function(){n(".loader").addClass("shrinked");new o("simtexter")},700)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./app/app.js":1}],12:[function(t,e,n){"use strict";function o(t,e,n,o,i){this.srcTxtIdx=t,this.srcTkBeginPos=e,this.trgTxtIdx=n,this.trgTkBeginPos=o,this.matchLength=i}e.exports=o},{}],13:[function(t,e,n){"use strict";function o(t,e,n){this.txtIdx=t,this.tkBeginPos=e,this.matchLength=n,this.styleClass=void 0}o.prototype.createLinkNode=function(t,e){var n=this,o=document.createElement("a");return o.id=[n.txtIdx+1,"-",n.tkBeginPos].join(""),o.className=n.styleClass,o.href=["#",e.txtIdx+1,"-",e.tkBeginPos].join(""),o.textContent=t,o},o.prototype.getTkEndPosition=function(){var t=this;return t.tkBeginPos+t.matchLength},o.prototype.getTxtBeginPos=function(t){var e=this;return t[e.tkBeginPos].txtBeginPos},o.prototype.getTxtEndPos=function(t){var e=this;return t[e.tkBeginPos+e.matchLength-1].txtEndPos},o.prototype.setStyleClass=function(t){var e=this;"number"==typeof t&&(e.styleClass=["hl-",t%10].join("")),"string"==typeof t&&(e.styleClass=t)},e.exports=o},{}],14:[function(t,e,n){(function(n){"use strict";function o(t){this.ignoreLetterCase=t.getItemValueByKey("ignoreLetterCase"),this.ignoreNumbers=t.getItemValueByKey("ignoreNumbers"),this.ignorePunctuation=t.getItemValueByKey("ignorePunctuation"),this.replaceUmlaut=t.getItemValueByKey("replaceUmlaut"),this.minMatchLength=t.getItemValueByKey("minMatchLength"),this.texts=[],this.tokens=[new p],this.uniqueMatches=0}var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,r="undefined"!=typeof window?window.XRegExp:"undefined"!=typeof n?n.XRegExp:null,a=t("./match.js"),s=t("./matchSegment.js"),l=t("./text.js"),p=t("./token.js");o.prototype.compare=function(t){var e=this,n=i.Deferred(),o=[],r=[];return e._readInput(t,o),r=e._getSimilarities(0,1,o),r.length?n.resolve(e._getNodes(t,r)):n.reject("No similarities found."),n.promise()},o.prototype._applyStyles=function(t){var e=this,n=e._sortSimilarities(t,1),o=n.length,i=1,r=[n[0][0],n[0][1]];r[0].setStyleClass(0),r[1].setStyleClass(0);for(var a=[r],s=1;o>s;s++){var l=a[a.length-1][1],p=n[s][1];if(l.tkBeginPos!=p.tkBeginPos)if(l.getTkEndPosition()-1<p.tkBeginPos)r=[n[s][0],n[s][1]],r[0].setStyleClass(i),r[1].setStyleClass(i),a.push(r),i++;else if(l.getTkEndPosition()<p.getTkEndPosition()){var d=/overlapping$/.test(l.styleClass)?l.styleClass:l.styleClass+" overlapping";a[a.length-1][0].setStyleClass(d),a[a.length-1][1].setStyleClass(d),a[a.length-1][1].matchLength=p.tkBeginPos-l.tkBeginPos,r=[n[s][0],n[s][1]],r[0].setStyleClass(d),r[1].setStyleClass(d),a.push(r)}}return e.uniqueMatches=a.length,a},o.prototype._buildRegex=function(){var t=this,e="\\p{N}",n="\\p{P}",o="";return t.ignoreNumbers&&(o+=e),t.ignorePunctuation&&(o+=n),o.length>0?r("["+o+"]","g"):void 0},o.prototype._cleanInputText=function(t){var e=this,n=t,o=e._buildRegex();return o&&(n=t.replace(o," ")),e.ignoreLetterCase&&(n=n.toLowerCase()),n},o.prototype._cleanWord=function(t){var e=this,n={"ä":"ae","ö":"oe","ü":"ue","ß":"ss","æ":"ae","œ":"oe","Ä":"AE","Ö":"OE","Ü":"UE","Æ":"AE","Œ":"OE"},o=t;return e.replaceUmlaut&&(o=t.replace(/ä|ö|ü|ß|æ|œ|Ä|Ö|Ü|Æ|Œ/g,function(t){return n[t]})),o},o.prototype._getBestMatch=function(t,e,n,o){for(var i,r,s=this,l=0,p=0,d=0,u=n;u>0&&u<s.tokens.length;u=o[u])if(!(u<s.texts[e].tkBeginPos)){var c=l>0?l+1:s.minMatchLength;if(p=n+c-1,d=u+c-1,p<s.texts[t].tkEndPos&&d<s.texts[e].tkEndPos&&d>=p+c){for(var h=c;h>0&&s.tokens[p].text===s.tokens[d].text;)p--,d--,h--;if(!(h>0)){var f=c;for(p=n+c,d=u+c;p<s.texts[t].tkEndPos&&d<s.texts[e].tkEndPos&&d>p+f&&s.tokens[p].text===s.tokens[d].text;)p++,d++,f++;f>=s.minMatchLength&&f>l&&(l=f,r=u,i=new a(t,n,e,r,l))}}}return i},o.prototype._getNodes=function(t,e){for(var n=this,o=t.length,i=[],r=n._applyStyles(e),a=0;o>a;a++){var s=t[a].text,l=0,p=l,d=s.length,u=0,c=0==a?a+1:a-1;i[a]=[];for(var h=n._sortSimilarities(r,a);d>=l;){if(!(h.length&&u<h.length)){var f=s.slice(p,d),g=document.createTextNode(f);i[a].push(g),l=d;break}var m=h[u][a],v=m.getTxtBeginPos(n.tokens),y=m.getTxtEndPos(n.tokens),x=s.slice(p,v),b=document.createTextNode(x);i[a].push(b);var w=s.slice(v,y),T=m.createLinkNode(w,h[u][c]);i[a].push(T),u++,l=y,p=l,l++}}return i},o.prototype._getSimilarities=function(t,e,n){for(var o=this,i=[],r=o.texts[t].tkBeginPos,a=o.texts[t].tkEndPos;r+o.minMatchLength<=a;){var l=o._getBestMatch(t,e,r,n);l&&l.matchLength>0?(i.push([new s(l.srcTxtIdx,l.srcTkBeginPos,l.matchLength),new s(l.trgTxtIdx,l.trgTkBeginPos,l.matchLength)]),r+=l.matchLength):r++}return i},o.prototype._makeForwardReferences=function(t,e,n){for(var o=this,i=t.tkBeginPos,r=t.tkEndPos,a=i;a+o.minMatchLength-1<r;a++){var s=o.tokens.slice(a,a+o.minMatchLength).map(function(t){return t.text}).join("");s in n&&(e[n[s]]=a),n[s]=a}},o.prototype._readInput=function(t,e){for(var n=this,o={},i=t.length,r=0;i>r;r++){var a=t[r],s=a.text.match(/[^\s]+/g).length;n.texts.push(new l(a.mode,a.text.length,s,a.fileName,n.tokens.length)),n._tokenizeInput(a.text),n.texts[r].tkEndPos=n.tokens.length,n._makeForwardReferences(n.texts[r],e,o)}},o.prototype._sortSimilarities=function(t,e){var n=t.slice(0);return n.sort(function(t,n){var o=t[e].tkBeginPos-n[e].tkBeginPos;return o?o:n[e].matchLength-t[e].matchLength}),n},o.prototype._tokenizeInput=function(t){for(var e,n=this,o=/[^\s]+/g,i=n._cleanInputText(t);e=o.exec(i);){var r=e[0],a=n._cleanWord(r);if(a.length>0){var s=e.index,l=e.index+r.length;n.tokens.push(new p(a,s,l))}}},e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./match.js":12,"./matchSegment.js":13,"./text.js":15,"./token.js":16}],15:[function(t,e,n){"use strict";function o(t,e,n,o,i,r){this.inputMode=t,this.fileName=o,this.tkBeginPos=i||0,this.tkEndPos=r||0,this.nrOfCharacters=e||0,this.nrOfWords=n||0}e.exports=o},{}],16:[function(t,e,n){"use strict";function o(t,e,n){
this.text=t||"",this.txtBeginPos=e||0,this.txtEndPos=n||0}e.exports=o},{}]},{},[11]);
//# sourceMappingURL=app.min.js.map
